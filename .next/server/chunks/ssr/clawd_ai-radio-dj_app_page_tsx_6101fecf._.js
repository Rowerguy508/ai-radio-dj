module.exports=[88176,a=>{"use strict";let b,c,d,e;var f,g=a.i(98735),h=a.i(50840);let i=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var j={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let k=(0,h.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:f,iconNode:g,...k},l)=>(0,h.createElement)("svg",{ref:l,...j,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:i("lucide",e),...k},[...g.map(([a,b])=>(0,h.createElement)(a,b)),...Array.isArray(f)?f:[f]])),l=(a,b)=>{let c=(0,h.forwardRef)(({className:c,...d},e)=>(0,h.createElement)(k,{ref:e,iconNode:b,className:i(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,c),...d}));return c.displayName=`${a}`,c},m=l("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),n=l("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),o=l("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),p=l("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),q=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},r=a=>b=>{try{let c=a(b);if(c instanceof Promise)return c;return{then:a=>r(a)(c),catch(a){return this}}}catch(a){return{then(a){return this},catch:b=>r(b)(a)}}},s=(d=(f=(b=(a,b)=>({isPlaying:!1,currentTrack:null,currentStation:null,queue:[],volume:.7,crossfadeDuration:5,stations:[],voices:[],showSettings:!1,showVoiceSelector:!1,commentaryEnabled:!0,setCurrentTrack:b=>a({currentTrack:b}),setCurrentStation:b=>a({currentStation:b}),setIsPlaying:b=>a({isPlaying:b}),setVolume:b=>a({volume:b}),setCrossfadeDuration:b=>a({crossfadeDuration:b}),setQueue:b=>a({queue:b}),addToQueue:b=>a(a=>({queue:[...a.queue,b]})),nextTrack:()=>{let{queue:c}=b();if(c.length>0){let[b,...d]=c;a({currentTrack:b,queue:d})}},toggleSettings:()=>a(a=>({showSettings:!a.showSettings})),toggleVoiceSelector:()=>a(a=>({showVoiceSelector:!a.showVoiceSelector})),toggleCommentary:()=>a(a=>({commentaryEnabled:!a.commentaryEnabled})),addStation:b=>{a(a=>({stations:[...a.stations,b]}))},updateStation:(b,c)=>{a(a=>({stations:a.stations.map(a=>a.id===b?{...a,...c}:a)}))},removeStation:b=>{a(a=>({stations:a.stations.filter(a=>a.id!==b)}))},addVoice:b=>{a(a=>({voices:[...a.voices,b]}))},removeVoice:b=>{a(a=>({voices:a.voices.filter(a=>a.id!==b)}))},syncToCloud:async a=>{let{stations:c,voices:d}=b();try{await fetch("/api/stations/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a,stations:c,voices:d})})}catch(a){console.warn("Cloud sync skipped (Supabase not configured)")}},loadFromCloud:async b=>{try{let[c,d]=await Promise.all([fetch(`/api/stations?userId=${b}`),fetch(`/api/voices?userId=${b}`)]);if(c.ok){let b=await c.json(),e=await d.json();a({stations:b.stations||[],voices:e.voices||[]})}}catch(a){console.warn("Cloud load skipped (Supabase not configured), using local data")}}}),c={name:"raydo-radio-storage",partialize:a=>({stations:a.stations,voices:a.voices,volume:a.volume,crossfadeDuration:a.crossfadeDuration,commentaryEnabled:a.commentaryEnabled})},(a,d,e)=>{let f,g={storage:function(a,b){let c;try{c=a()}catch(a){return}return{getItem:a=>{var b;let d=a=>null===a?null:JSON.parse(a,void 0),e=null!=(b=c.getItem(a))?b:null;return e instanceof Promise?e.then(d):d(e)},setItem:(a,b)=>c.setItem(a,JSON.stringify(b,void 0)),removeItem:a=>c.removeItem(a)}}(()=>localStorage),partialize:a=>a,version:0,merge:(a,b)=>({...b,...a}),...c},h=!1,i=0,j=new Set,k=new Set,l=g.storage;if(!l)return b((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${g.name}', the given storage is currently unavailable.`),a(...b)},d,e);let m=()=>{let a=g.partialize({...d()});return l.setItem(g.name,{state:a,version:g.version})},n=e.setState;e.setState=(a,b)=>(n(a,b),m());let o=b((...b)=>(a(...b),m()),d,e);e.getInitialState=()=>o;let p=()=>{var b,c;if(!l)return;let e=++i;h=!1,j.forEach(a=>{var b;return a(null!=(b=d())?b:o)});let n=(null==(c=g.onRehydrateStorage)?void 0:c.call(g,null!=(b=d())?b:o))||void 0;return r(l.getItem.bind(l))(g.name).then(a=>{if(a)if("number"!=typeof a.version||a.version===g.version)return[!1,a.state];else{if(g.migrate){let b=g.migrate(a.state,a.version);return b instanceof Promise?b.then(a=>[!0,a]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(b=>{var c;if(e!==i)return;let[h,j]=b;if(a(f=g.merge(j,null!=(c=d())?c:o),!0),h)return m()}).then(()=>{e===i&&(null==n||n(f,void 0),f=d(),h=!0,k.forEach(a=>a(f)))}).catch(a=>{e===i&&(null==n||n(void 0,a))})};return e.persist={setOptions:a=>{g={...g,...a},a.storage&&(l=a.storage)},clearStorage:()=>{null==l||l.removeItem(g.name)},getOptions:()=>g,rehydrate:()=>p(),hasHydrated:()=>h,onHydrate:a=>(j.add(a),()=>{j.delete(a)}),onFinishHydration:a=>(k.add(a),()=>{k.delete(a)})},g.skipHydration||p(),f||o}))?q(f):q,Object.assign(e=a=>(function(a,b=a=>a){let c=h.default.useSyncExternalStore(a.subscribe,h.default.useCallback(()=>b(a.getState()),[a,b]),h.default.useCallback(()=>b(a.getInitialState()),[a,b]));return h.default.useDebugValue(c),c})(d,a),d),e);function t(){let{showSettings:a,toggleSettings:b,commentaryEnabled:c,toggleCommentary:d,crossfadeDuration:e,setCrossfadeDuration:f,currentStation:i,updateStation:j}=s(),[k,l]=(0,h.useState)(i);return a?(0,g.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-zinc-900 rounded-xl w-full max-w-md p-6 m-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,g.jsx)("h2",{className:"text-xl font-bold text-white",children:"Settings"}),(0,g.jsx)("button",{onClick:b,className:"p-2 text-zinc-400 hover:text-white transition-colors",children:(0,g.jsx)(m,{size:20})})]}),(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsxs)("button",{onClick:d,className:"w-full flex items-center justify-between p-4 bg-zinc-800 rounded-lg",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)(n,{size:20,className:c?"text-white":"text-zinc-500"}),(0,g.jsx)("span",{className:"text-white",children:"AI Commentary"})]}),(0,g.jsx)("div",{className:`w-12 h-6 rounded-full transition-colors ${c?"bg-green-500":"bg-zinc-600"}`,children:(0,g.jsx)("div",{className:`w-5 h-5 rounded-full bg-white mt-0.5 transition-transform ${c?"translate-x-6":"translate-x-0.5"}`})})]})}),(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,g.jsx)(o,{size:20,className:"text-zinc-400"}),(0,g.jsx)("span",{className:"text-white",children:"Crossfade Duration"})]}),(0,g.jsx)("input",{type:"range",min:0,max:15,step:1,value:e,onChange:a=>f(parseFloat(a.target.value)),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white"}),(0,g.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500 mt-1",children:[(0,g.jsx)("span",{children:"Instant"}),(0,g.jsxs)("span",{children:[e,"s"]}),(0,g.jsx)("span",{children:"15s"})]})]}),i&&(0,g.jsxs)("div",{className:"mb-6",children:[(0,g.jsxs)("h3",{className:"text-sm font-medium text-zinc-400 mb-3",children:[i.name," Settings"]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsxs)("label",{className:"block text-white text-sm mb-2",children:["Energy Level: ",Math.round(100*(k?.energyLevel||i.energyLevel)),"%"]}),(0,g.jsx)("input",{type:"range",min:0,max:1,step:.05,value:k?.energyLevel??i.energyLevel,onChange:a=>l({...k,energyLevel:parseFloat(a.target.value)}),className:"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white"}),(0,g.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500 mt-1",children:[(0,g.jsx)("span",{children:"Chill"}),(0,g.jsx)("span",{children:"Balanced"}),(0,g.jsx)("span",{children:"Hype"})]})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-white text-sm mb-2",children:"Commentary Style"}),(0,g.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["chill","balanced","hype"].map(a=>(0,g.jsx)("button",{onClick:()=>l({...k,style:a}),className:`py-2 px-4 rounded-lg text-sm transition-colors ${(k?.style??i.style)===a?"bg-white text-black":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsxs)("label",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer",children:[(0,g.jsx)("span",{className:"text-white text-sm",children:"Include Messages"}),(0,g.jsx)("input",{type:"checkbox",checked:k?.includeMessages??i.includeMessages,onChange:a=>l({...k,includeMessages:a.target.checked}),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white"})]}),(0,g.jsxs)("label",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer",children:[(0,g.jsx)("span",{className:"text-white text-sm",children:"Include Calendar"}),(0,g.jsx)("input",{type:"checkbox",checked:k?.includeCalendar??i.includeCalendar,onChange:a=>l({...k,includeCalendar:a.target.checked}),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white"})]}),(0,g.jsxs)("label",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer",children:[(0,g.jsx)("span",{className:"text-white text-sm",children:"Include News"}),(0,g.jsx)("input",{type:"checkbox",checked:k?.includeNews??i.includeNews,onChange:a=>l({...k,includeNews:a.target.checked}),className:"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white"})]})]})]}),(0,g.jsxs)("button",{onClick:()=>{k&&i?.id===k.id&&j(i.id,k)},className:"w-full flex items-center justify-center gap-2 py-3 bg-white text-black rounded-lg font-medium hover:bg-zinc-200 transition-colors",children:[(0,g.jsx)(p,{size:18}),"Save Settings"]})]})}):null}let u=l("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),v=l("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),w=l("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]),x=l("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]),y=l("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),z=l("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function A(){let{isPlaying:a,currentTrack:b,queue:c,volume:d,setIsPlaying:e,setVolume:f,nextTrack:i}=s(),j=(0,h.useRef)(null),[k,l]=(0,h.useState)(!1),[m,n]=(0,h.useState)(0),[o,p]=(0,h.useState)(0),[q,r]=(0,h.useState)(void 0);(0,h.useEffect)(()=>{b?.previewUrl!==q&&r(b?.previewUrl)},[b]),(0,h.useEffect)(()=>{let b=j.current;if(!b)return;let c=()=>{i()},d=()=>{a&&b.play().catch(a=>console.log("Auto-play blocked:",a))};return b.addEventListener("ended",c),b.addEventListener("canplay",d),()=>{b.removeEventListener("ended",c),b.removeEventListener("canplay",d)}},[i,a]),(0,h.useEffect)(()=>{j.current&&(j.current.volume=k?0:d)},[d,k]),(0,h.useEffect)(()=>{let a=j.current;if(!a)return;let b=()=>{n(a.currentTime),p(a.duration||0)};return a.addEventListener("timeupdate",b),a.addEventListener("loadedmetadata",b),()=>{a.removeEventListener("timeupdate",b),a.removeEventListener("loadedmetadata",b)}},[]);let t=async()=>{if(!j.current)return void e(!a);try{a?j.current.pause():await j.current.play(),e(!a)}catch(a){console.log("Play error:",a),j.current.load(),setTimeout(async()=>{try{await j.current?.play(),e(!0)}catch(a){console.log("Retry play failed:",a)}},100)}},A=a=>{let b=Math.floor(a/60),c=Math.floor(a%60);return`${b}:${c.toString().padStart(2,"0")}`},B=b||(c.length>0?c[0]:null);return(0,g.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 border-t border-zinc-800 p-4 z-50",children:[(0,g.jsx)("audio",{ref:j,src:q,preload:"auto"}),(0,g.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[B?.artworkUrl&&(0,g.jsx)("img",{src:B.artworkUrl,alt:B.title,className:"w-16 h-16 rounded-lg object-cover",onError:a=>{a.target.style.display="none"}}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("h3",{className:"text-white font-medium",children:B?.title||"No track playing"}),(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:B?.artistName||"Select a station to start"}),B?.spotifyUri&&(0,g.jsxs)("a",{href:B.spotifyUri,className:"text-[#1DB954] text-xs hover:underline flex items-center gap-1 mt-1",children:[(0,g.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,g.jsx)("path",{d:"M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"})}),"Open in Spotify"]})]})]}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("input",{type:"range",min:0,max:o||100,value:m,onChange:a=>{let b=parseFloat(a.target.value);j.current&&(j.current.currentTime=b),n(b)},className:"w-full h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white"}),(0,g.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500 mt-1",children:[(0,g.jsx)("span",{children:A(m)}),(0,g.jsx)("span",{children:A(o)})]})]}),(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("button",{onClick:()=>{c.length>0&&e(!0)},className:"p-2 text-zinc-400 hover:text-white transition-colors",children:(0,g.jsx)(x,{size:20})}),(0,g.jsx)("button",{onClick:t,className:"p-3 bg-white rounded-full text-black hover:bg-zinc-200 transition-colors flex items-center justify-center",children:a?(0,g.jsx)(v,{size:24,fill:"currentColor"}):(0,g.jsx)(u,{size:24,fill:"currentColor"})}),(0,g.jsx)("button",{onClick:()=>{i()},className:"p-2 text-zinc-400 hover:text-white transition-colors",children:(0,g.jsx)(w,{size:20})})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("button",{onClick:()=>l(!k),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:k?(0,g.jsx)(z,{size:20}):(0,g.jsx)(y,{size:20})}),(0,g.jsx)("input",{type:"range",min:0,max:1,step:.1,value:k?0:d,onChange:a=>f(parseFloat(a.target.value)),className:"w-24 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white"})]})]})]})}function B({isPlaying:a}){let b=(0,h.useRef)(null),c=(0,h.useRef)();return(0,h.useEffect)(()=>{let d=b.current;if(!d)return;let e=d.getContext("2d");if(!e)return;let f=d.width/64-2,g=()=>{if(!a){e.fillStyle="#18181b",e.fillRect(0,0,d.width,d.height),c.current=requestAnimationFrame(g);return}e.fillStyle="rgba(24, 24, 27, 0.2)",e.fillRect(0,0,d.width,d.height);for(let a=0;a<64;a++){let b=Date.now()/1e3,c=30*Math.sin(2*b+.3*a)+20*Math.sin(3*b+.5*a)+30*Math.random()+20,g=(5*a+20*b)%360,h=a*(f+2),i=d.height-c;e.fillStyle=`hsla(${g}, 70%, 60%, 0.8)`,e.fillRect(h,i,f,c),e.shadowBlur=10,e.shadowColor=`hsla(${g}, 70%, 60%, 0.5)`}c.current=requestAnimationFrame(g)};return g(),()=>{c.current&&cancelAnimationFrame(c.current)}},[a]),(0,g.jsx)("canvas",{ref:b,width:800,height:200,className:"w-full h-48 rounded-xl",style:{background:"#18181b"}})}let C=(0,h.createContext)(null);function D({children:a}){let{setQueue:b,setCurrentTrack:c,setIsPlaying:d}=s(),[e,f]=(0,h.useState)(null),[i,j]=(0,h.useState)(!1),[k,l]=(0,h.useState)([]),[m,n]=(0,h.useState)(null);(0,h.useEffect)(()=>{let a=localStorage.getItem("spotify_access_token"),b=localStorage.getItem("spotify_token_expiry");a&&b&&Date.now()<parseInt(b)&&(n(a),o(a));let c=new URLSearchParams(window.location.search),d=c.get("spotify_token"),e=c.get("spotify_expires");d&&e&&(localStorage.setItem("spotify_access_token",d),localStorage.setItem("spotify_token_expiry",String(Date.now()+1e3*parseInt(e))),n(d),o(d),window.history.replaceState({},"","/"))},[]);let o=async a=>{try{let b=await fetch("https://api.spotify.com/v1/me",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let c=await b.json();f(c),p(a)}else r()}catch(a){console.error("Failed to fetch Spotify profile:",a)}},p=async a=>{try{let b=await fetch("https://api.spotify.com/v1/me/playlists?limit=20",{headers:{Authorization:`Bearer ${a}`}});if(b.ok){let a=await b.json();l(a.items||[])}}catch(a){console.error("Failed to fetch playlists:",a)}},q=()=>{let a=process.env.NEXT_PUBLIC_SPOTIFY_CLIENT_ID,b=`${window.location.origin}/api/spotify/callback`,c=`https://accounts.spotify.com/authorize?client_id=${a}&response_type=token&redirect_uri=${encodeURIComponent(b)}&scope=${encodeURIComponent("user-read-email user-read-private playlist-read-private playlist-read-collaborative streaming user-library-read")}`;window.location.href=c},r=()=>{localStorage.removeItem("spotify_access_token"),localStorage.removeItem("spotify_token_expiry"),n(null),f(null),l([])},t=async a=>{if(!m)return[];try{let b=await fetch(`https://api.spotify.com/v1/playlists/${a}/tracks?limit=50`,{headers:{Authorization:`Bearer ${m}`}});if(b.ok)return(await b.json()).items.filter(a=>a.track&&a.track.preview_url).map(a=>a.track)}catch(a){console.error("Failed to fetch tracks:",a)}return[]},u=async a=>{if(!m||!e)return void q();j(!0);try{let e=await fetch(`https://api.spotify.com/v1/recommendations?seed_genres=${{chill:["chill","lo-fi","ambient"],hype:["hip-hop","party","electronic"],balanced:["pop","indie","acoustic"]}[a][0]}&limit=20`,{headers:{Authorization:`Bearer ${m}`}});if(e.ok){let a=(await e.json()).tracks.filter(a=>a.preview_url).map(a=>({id:a.id,title:a.name,artistName:a.artists.map(a=>a.name).join(", "),albumName:a.album.name,artworkUrl:a.album.images[0]?.url||"",duration:Math.floor(a.duration_ms/1e3),previewUrl:a.preview_url,spotifyUri:a.uri}));b(a),c(a[0]),d(!0)}}catch(a){console.error("Failed to create radio:",a)}finally{j(!1)}};return(0,g.jsx)(C.Provider,{value:{user:e,isAuthenticated:!!e&&!!m,isLoading:i,playlists:k,connectSpotify:q,disconnect:r,getPlaylistTracks:t,createRadioStation:u},children:a})}function E(){let{user:a,isAuthenticated:b,playlists:c,connectSpotify:d,createRadioStation:e,isLoading:f}=function(){let a=(0,h.useContext)(C);if(!a)throw Error("useSpotify must be used within SpotifyProvider");return a}(),{isPlaying:i,currentTrack:j}=s(),[k,l]=(0,h.useState)("balanced");return b?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"mb-8 p-4 bg-zinc-900/50 rounded-xl flex items-center gap-4",children:[a?.images?.[0]&&(0,g.jsx)("img",{src:a.images[0].url,alt:a.display_name,className:"w-12 h-12 rounded-full"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:"Signed in as"}),(0,g.jsx)("p",{className:"text-white font-medium",children:a?.display_name})]}),(0,g.jsx)("button",{onClick:()=>window.location.href="/api/spotify/disconnect",className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg text-sm",children:"Disconnect"})]}),(0,g.jsxs)("div",{className:"mb-8 p-6 bg-zinc-900/50 rounded-xl",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"ðŸŽµ Create AI Radio Station"}),(0,g.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Select a mood and the AI DJ will weave commentary between songs from your Spotify library"}),(0,g.jsx)("div",{className:"flex gap-3 mb-4",children:["chill","balanced","hype"].map(a=>(0,g.jsxs)("button",{onClick:()=>l(a),className:`px-4 py-2 rounded-lg font-medium transition-colors ${k===a?"bg-purple-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"}`,children:["chill"===a&&"ðŸŒ€ Chill","balanced"===a&&"âš–ï¸ Balanced","hype"===a&&"âš¡ Hype"]},a))}),(0,g.jsx)("button",{onClick:()=>e(k),disabled:f,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:f?"Creating Station...":"ðŸš€ Start AI Radio"})]}),c.length>0&&(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"ðŸ“š Your Playlists"}),(0,g.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:c.slice(0,8).map(a=>(0,g.jsxs)("div",{className:"p-4 bg-zinc-900/50 rounded-xl hover:bg-zinc-800 transition-colors cursor-pointer group",children:[a.images[0]&&(0,g.jsx)("img",{src:a.images[0].url,alt:a.name,className:"w-full aspect-square object-cover rounded-lg mb-3"}),(0,g.jsx)("p",{className:"text-white font-medium truncate",children:a.name}),(0,g.jsxs)("p",{className:"text-zinc-500 text-sm",children:[a.tracks.total," tracks"]})]},a.id))})]}),j&&(0,g.jsxs)("div",{className:"mb-6 p-4 bg-zinc-900/50 rounded-xl flex items-center gap-4",children:[j.artworkUrl&&(0,g.jsx)("img",{src:j.artworkUrl,alt:j.title,className:"w-16 h-16 rounded-lg"}),(0,g.jsxs)("div",{className:"flex-1",children:[(0,g.jsx)("p",{className:"text-white font-medium",children:j.title}),(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:j.artistName})]}),(0,g.jsx)("div",{className:`w-3 h-3 rounded-full ${i?"bg-green-400 animate-pulse":"bg-zinc-500"}`})]})]}):(0,g.jsx)("div",{className:"mb-8 p-6 bg-gradient-to-r from-green-500/10 to-green-600/10 border border-green-500/20 rounded-xl",children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-green-400 mb-1",children:"ðŸŽ§ Connect Spotify"}),(0,g.jsx)("p",{className:"text-zinc-400",children:"Sign in with Spotify to stream real music and create personalized radio stations"})]}),(0,g.jsx)("button",{onClick:d,className:"px-6 py-3 bg-[#1DB954] hover:bg-[#1ed760] text-black font-semibold rounded-lg transition-colors",children:"Connect Spotify"})]})})}function F(){let{toggleSettings:a,commentaryEnabled:b,isPlaying:c}=s(),[d,e]=(0,h.useState)(!0);return((0,h.useEffect)(()=>{let a=setTimeout(()=>e(!1),1e3);return()=>clearTimeout(a)},[]),d)?(0,g.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("div",{className:"w-16 h-16 border-4 border-zinc-800 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,g.jsx)("p",{className:"text-zinc-400",children:"Loading RAY.DO..."})]})}):(0,g.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,g.jsx)("header",{className:"sticky top-0 z-10 bg-black/80 backdrop-blur-lg border-b border-zinc-800",children:(0,g.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,g.jsx)("span",{className:"text-xl",children:"ðŸŽµ"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-xl font-bold",children:"RAY.DO"}),(0,g.jsx)("p",{className:"text-xs text-zinc-500",children:"AI Radio DJ with Spotify"})]})]}),(0,g.jsx)("button",{onClick:a,className:"p-2 text-zinc-400 hover:text-white transition-colors",children:(0,g.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,g.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,g.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})}),(0,g.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-8 pb-32",children:[(0,g.jsx)(E,{}),(0,g.jsx)("div",{className:"mt-6",children:(0,g.jsx)(B,{isPlaying:c})}),(0,g.jsxs)("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,g.jsxs)("div",{className:"p-4 bg-zinc-900 rounded-lg",children:[(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:"Currently Playing"}),(0,g.jsx)("p",{className:"text-white font-medium mt-1",children:"AI Radio Station"})]}),(0,g.jsxs)("div",{className:"p-4 bg-zinc-900 rounded-lg",children:[(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:"AI Commentary"}),(0,g.jsx)("p",{className:"text-white font-medium mt-1",children:"Weaving between tracks"})]}),(0,g.jsxs)("div",{className:"p-4 bg-zinc-900 rounded-lg",children:[(0,g.jsx)("p",{className:"text-zinc-400 text-sm",children:"Music Source"}),(0,g.jsx)("p",{className:"text-white font-medium mt-1",children:"Your Spotify Library"})]})]})]}),(0,g.jsx)(A,{}),(0,g.jsx)(t,{})]})}function G(){return(0,g.jsx)(D,{children:(0,g.jsx)(F,{})})}a.s(["default",()=>G],88176)}];

//# sourceMappingURL=clawd_ai-radio-dj_app_page_tsx_6101fecf._.js.map