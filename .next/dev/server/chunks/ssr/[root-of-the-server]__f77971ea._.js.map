{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/lib/store/radio.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\n// Types\nexport interface Track {\n  id: string;\n  title: string;\n  artistName: string;\n  albumName?: string;\n  artworkUrl?: string;\n  duration: number; // seconds\n  previewUrl?: string;\n  spotifyUri?: string; // For full playback on Spotify app\n}\n\nexport interface Station {\n  id: string;\n  name: string;\n  description?: string;\n  energyLevel: number; // 0-1\n  style: 'chill' | 'balanced' | 'hype';\n  voiceId?: string;\n  voiceName?: string;\n  musicGenres: string[];\n  includeMessages: boolean;\n  includeCalendar: boolean;\n  includeNews: boolean;\n  isActive: boolean;\n}\n\nexport interface Voice {\n  id: string;\n  name: string;\n  voiceId: string;\n  style: number; // 0-1\n  language: string;\n  personality?: string;\n}\n\nexport interface RadioState {\n  // Playback\n  isPlaying: boolean;\n  currentTrack: Track | null;\n  currentStation: Station | null;\n  queue: Track[];\n  volume: number;\n  crossfadeDuration: number;\n\n  // Stations (local storage with optional cloud sync)\n  stations: Station[];\n  voices: Voice[];\n\n  // UI\n  showSettings: boolean;\n  showVoiceSelector: boolean;\n  commentaryEnabled: boolean;\n\n  // Actions\n  setCurrentTrack: (track: Track | null) => void;\n  setCurrentStation: (station: Station | null) => void;\n  setIsPlaying: (playing: boolean) => void;\n  setVolume: (volume: number) => void;\n  setCrossfadeDuration: (duration: number) => void;\n  setQueue: (queue: Track[]) => void;\n  addToQueue: (track: Track) => void;\n  nextTrack: () => void;\n  toggleSettings: () => void;\n  toggleVoiceSelector: () => void;\n  toggleCommentary: () => void;\n\n  // Local station management\n  addStation: (station: Station) => void;\n  updateStation: (id: string, updates: Partial<Station>) => void;\n  removeStation: (id: string) => void;\n\n  // Voice management\n  addVoice: (voice: Voice) => void;\n  removeVoice: (id: string) => void;\n\n  // Cloud sync (optional)\n  syncToCloud: (userId: string) => Promise<void>;\n  loadFromCloud: (userId: string) => Promise<void>;\n}\n\n// Demo user ID for local-first mode\nconst DEMO_USER_ID = 'demo-user-raydo';\n\n// Create the store with local persistence\nexport const useRadioStore = create<RadioState>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      isPlaying: false,\n      currentTrack: null,\n      currentStation: null,\n      queue: [],\n      volume: 0.7,\n      crossfadeDuration: 5,\n      stations: [],\n      voices: [],\n      showSettings: false,\n      showVoiceSelector: false,\n      commentaryEnabled: true,\n      voices: [\n        { id: '1', name: 'Alex', voiceId: '21m00Tcm4TlvDq8ikWAM', style: 0.5, language: 'English', personality: 'Professional & Warm' },\n        { id: '2', name: 'Sarah', voiceId: 'AZnzlk1XvdvUeBnG7F4o', style: 0.6, language: 'English', personality: 'Energetic & Friendly' },\n        { id: '3', name: 'James', voiceId: 'Fljq6R8y61NddGlE9krf', style: 0.4, language: 'English', personality: 'Deep & Authoritative' },\n        { id: '4', name: 'Bella', voiceId: 'EXAVITQu4vr4xnSDxMaL', style: 0.7, language: 'English', personality: 'Soft & Smooth' },\n        { id: '5', name: 'Daniel', voiceId: 'nPczCjz82KWdKScP46A1', style: 0.5, language: 'English', personality: 'Casual & Cool' },\n      ],\n\n      // Actions\n      setCurrentTrack: (track) => set({ currentTrack: track }),\n      setCurrentStation: (station) => set({ currentStation: station }),\n      setIsPlaying: (playing) => set({ isPlaying: playing }),\n      setVolume: (volume) => set({ volume }),\n      setCrossfadeDuration: (duration) => set({ crossfadeDuration: duration }),\n      setQueue: (queue) => set({ queue }),\n      addToQueue: (track) =>\n        set((state) => ({ queue: [...state.queue, track] })),\n\n      nextTrack: () => {\n        const { queue } = get();\n        if (queue.length > 0) {\n          const [next, ...rest] = queue;\n          set({ currentTrack: next, queue: rest });\n        }\n      },\n\n      toggleSettings: () => set((state) => ({ showSettings: !state.showSettings })),\n      toggleVoiceSelector: () =>\n        set((state) => ({ showVoiceSelector: !state.showVoiceSelector })),\n      toggleCommentary: () =>\n        set((state) => ({ commentaryEnabled: !state.commentaryEnabled })),\n\n      // Local station management (no cloud sync needed for basic functionality)\n      addStation: (station) => {\n        set((state) => ({ stations: [...state.stations, station] }));\n      },\n\n      updateStation: (id, updates) => {\n        set((state) => ({\n          stations: state.stations.map((s) =>\n            s.id === id ? { ...s, ...updates } : s\n          ),\n        }));\n      },\n\n      removeStation: (id) => {\n        set((state) => ({\n          stations: state.stations.filter((s) => s.id !== id),\n        }));\n      },\n\n      // Voice management\n      addVoice: (voice) => {\n        set((state) => ({ voices: [...state.voices, voice] }));\n      },\n\n      removeVoice: (id) => {\n        set((state) => ({\n          voices: state.voices.filter((v) => v.id !== id),\n        }));\n      },\n\n      // Cloud sync (optional - fails silently if Supabase not configured)\n      syncToCloud: async (userId: string) => {\n        const { stations, voices } = get();\n        try {\n          await fetch('/api/stations/sync', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ userId, stations, voices }),\n          });\n        } catch (e) {\n          console.warn('Cloud sync skipped (Supabase not configured)');\n        }\n      },\n\n      loadFromCloud: async (userId: string) => {\n        try {\n          const [stationsRes, voicesRes] = await Promise.all([\n            fetch(`/api/stations?userId=${userId}`),\n            fetch(`/api/voices?userId=${userId}`),\n          ]);\n\n          if (stationsRes.ok) {\n            const stationsData = await stationsRes.json();\n            const voicesData = await voicesRes.json();\n            set({ stations: stationsData.stations || [], voices: voicesData.voices || [] });\n          }\n        } catch (e) {\n          console.warn('Cloud load skipped (Supabase not configured), using local data');\n        }\n      },\n    }),\n    {\n      name: 'raydo-radio-storage',\n      partialize: (state) => ({\n        stations: state.stations,\n        voices: state.voices,\n        volume: state.volume,\n        crossfadeDuration: state.crossfadeDuration,\n        commentaryEnabled: state.commentaryEnabled,\n      }),\n    }\n  )\n);\n\n// Selectors\nexport const useCurrentTrack = () => useRadioStore((state) => state.currentTrack);\nexport const useIsPlaying = () => useRadioStore((state) => state.isPlaying);\nexport const useCurrentStation = () => useRadioStore((state) => state.currentStation);\nexport const useStations = () => useRadioStore((state) => state.stations);\nexport const useVoices = () => useRadioStore((state) => state.voices);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/app/components/Settings.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { X, Volume2, Mic, Sliders, Save, User, ChevronDown } from 'lucide-react';\nimport { useRadioStore } from '@/lib/store/radio';\n\nexport function Settings() {\n  const {\n    showSettings,\n    toggleSettings,\n    commentaryEnabled,\n    toggleCommentary,\n    crossfadeDuration,\n    setCrossfadeDuration,\n    currentStation,\n    updateStation,\n    voices,\n  } = useRadioStore();\n\n  const [localStation, setLocalStation] = useState(currentStation);\n  const [showVoiceDropdown, setShowVoiceDropdown] = useState(false);\n\n  if (!showSettings) return null;\n\n  const handleSaveStation = () => {\n    if (localStation && currentStation?.id === localStation.id) {\n      updateStation(currentStation.id, localStation);\n    }\n  };\n\n  const selectedVoice = voices.find(v => v.voiceId === localStation?.voiceId) || voices[0];\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-zinc-900 rounded-xl w-full max-w-md p-6 m-4 max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-xl font-bold text-white\">Settings</h2>\n          <button\n            onClick={toggleSettings}\n            className=\"p-2 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <X size={20} />\n          </button>\n        </div>\n\n        {/* Voice Selection */}\n        <div className=\"mb-6\">\n          <label className=\"flex items-center gap-3 text-zinc-400 text-sm mb-2\">\n            <User size={18} />\n            AI Voice\n          </label>\n          \n          <div className=\"relative\">\n            <button\n              onClick={() => setShowVoiceDropdown(!showVoiceDropdown)}\n              className=\"w-full flex items-center justify-between p-4 bg-zinc-800 rounded-lg hover:bg-zinc-700 transition-colors\"\n            >\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\n                  <span className=\"text-white font-medium\">{selectedVoice?.name[0]}</span>\n                </div>\n                <div className=\"text-left\">\n                  <p className=\"text-white font-medium\">{selectedVoice?.name}</p>\n                  <p className=\"text-zinc-500 text-xs\">{selectedVoice?.personality}</p>\n                </div>\n              </div>\n              <ChevronDown size={18} className={`text-zinc-400 transition-transform ${showVoiceDropdown ? 'rotate-180' : ''}`} />\n            </button>\n\n            {showVoiceDropdown && (\n              <div className=\"absolute top-full left-0 right-0 mt-2 bg-zinc-800 rounded-lg overflow-hidden z-10 shadow-xl border border-zinc-700\">\n                {voices.map((voice) => (\n                  <button\n                    key={voice.id}\n                    onClick={() => {\n                      setLocalStation(localStation ? { ...localStation, voiceId: voice.voiceId, voiceName: voice.name } : null);\n                      setShowVoiceDropdown(false);\n                    }}\n                    className={`w-full flex items-center gap-3 p-3 hover:bg-zinc-700 transition-colors ${\n                      localStation?.voiceId === voice.voiceId ? 'bg-zinc-700' : ''\n                    }`}\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\n                      <span className=\"text-white text-sm font-medium\">{voice.name[0]}</span>\n                    </div>\n                    <div className=\"text-left\">\n                      <p className=\"text-white text-sm\">{voice.name}</p>\n                      <p className=\"text-zinc-500 text-xs\">{voice.personality}</p>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Commentary Toggle */}\n        <div className=\"mb-6\">\n          <button\n            onClick={toggleCommentary}\n            className=\"w-full flex items-center justify-between p-4 bg-zinc-800 rounded-lg\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <Mic size={20} className={commentaryEnabled ? 'text-white' : 'text-zinc-500'} />\n              <span className=\"text-white\">AI Commentary</span>\n            </div>\n            <div className={`w-12 h-6 rounded-full transition-colors ${\n              commentaryEnabled ? 'bg-green-500' : 'bg-zinc-600'\n            }`}>\n              <div className={`w-5 h-5 rounded-full bg-white mt-0.5 transition-transform ${\n                commentaryEnabled ? 'translate-x-6' : 'translate-x-0.5'\n              }`} />\n            </div>\n          </button>\n        </div>\n\n        {/* Crossfade Duration */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <Sliders size={20} className=\"text-zinc-400\" />\n            <span className=\"text-white\">Crossfade Duration</span>\n          </div>\n          <input\n            type=\"range\"\n            min={0}\n            max={15}\n            step={1}\n            value={crossfadeDuration}\n            onChange={(e) => setCrossfadeDuration(parseFloat(e.target.value))}\n            className=\"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white\"\n          />\n          <div className=\"flex justify-between text-xs text-zinc-500 mt-1\">\n            <span>Instant</span>\n            <span>{crossfadeDuration}s</span>\n            <span>15s</span>\n          </div>\n        </div>\n\n        {/* Station Settings */}\n        {currentStation && (\n          <div className=\"mb-6\">\n            <h3 className=\"text-sm font-medium text-zinc-400 mb-3\">\n              {currentStation.name} Settings\n            </h3>\n\n            {/* Energy Slider */}\n            <div className=\"mb-4\">\n              <label className=\"block text-white text-sm mb-2\">\n                Energy Level: {Math.round((localStation?.energyLevel || currentStation.energyLevel) * 100)}%\n              </label>\n              <input\n                type=\"range\"\n                min={0}\n                max={1}\n                step={0.05}\n                value={localStation?.energyLevel ?? currentStation.energyLevel}\n                onChange={(e) => setLocalStation({\n                  ...localStation!,\n                  energyLevel: parseFloat(e.target.value),\n                })}\n                className=\"w-full h-2 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white\"\n              />\n              <div className=\"flex justify-between text-xs text-zinc-500 mt-1\">\n                <span>Chill</span>\n                <span>Balanced</span>\n                <span>Hype</span>\n              </div>\n            </div>\n\n            {/* Style Selection */}\n            <div className=\"mb-4\">\n              <label className=\"block text-white text-sm mb-2\">Commentary Style</label>\n              <div className=\"grid grid-cols-3 gap-2\">\n                {(['chill', 'balanced', 'hype'] as const).map((style) => (\n                  <button\n                    key={style}\n                    onClick={() => setLocalStation({\n                      ...localStation!,\n                      style,\n                    })}\n                    className={`py-2 px-4 rounded-lg text-sm transition-colors ${\n                      (localStation?.style ?? currentStation.style) === style\n                        ? 'bg-white text-black'\n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700'\n                    }`}\n                  >\n                    {style.charAt(0).toUpperCase() + style.slice(1)}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Toggles */}\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer\">\n                <span className=\"text-white text-sm\">Include Messages</span>\n                <input\n                  type=\"checkbox\"\n                  checked={localStation?.includeMessages ?? currentStation.includeMessages}\n                  onChange={(e) => setLocalStation({\n                    ...localStation!,\n                    includeMessages: e.target.checked,\n                  })}\n                  className=\"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white\"\n                />\n              </label>\n\n              <label className=\"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer\">\n                <span className=\"text-white text-sm\">Include Calendar</span>\n                <input\n                  type=\"checkbox\"\n                  checked={localStation?.includeCalendar ?? currentStation.includeCalendar}\n                  onChange={(e) => setLocalStation({\n                    ...localStation!,\n                    includeCalendar: e.target.checked,\n                  })}\n                  className=\"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white\"\n                />\n              </label>\n\n              <label className=\"flex items-center justify-between p-3 bg-zinc-800 rounded-lg cursor-pointer\">\n                <span className=\"text-white text-sm\">Include News</span>\n                <input\n                  type=\"checkbox\"\n                  checked={localStation?.includeNews ?? currentStation.includeNews}\n                  onChange={(e) => setLocalStation({\n                    ...localStation!,\n                    includeNews: e.target.checked,\n                  })}\n                  className=\"w-5 h-5 rounded border-zinc-600 bg-zinc-700 text-white focus:ring-white\"\n                />\n              </label>\n            </div>\n          </div>\n        )}\n\n        {/* Save Button */}\n        <button\n          onClick={handleSaveStation}\n          className=\"w-full flex items-center justify-center gap-2 py-3 bg-white text-black rounded-lg font-medium hover:bg-zinc-200 transition-colors\"\n        >\n          <Save size={18} />\n          Save Settings\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 849, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/lib/apple-music/player.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState, ReactNode, useCallback, useRef } from 'react';\nimport { useRadioStore } from '@/lib/store/radio';\n\ninterface AppleMusicUser {\n  name: string;\n  email: string;\n  id: string;\n}\n\ninterface AppleMusicContextType {\n  user: AppleMusicUser | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n  playlists: any[];\n  connectAppleMusic: () => Promise<void>;\n  disconnect: () => void;\n  createRadioStation: (mood: 'chill' | 'hype' | 'balanced') => Promise<void>;\n  play: () => Promise<void>;\n  pause: () => void;\n  skip: () => void;\n}\n\nconst AppleMusicContext = createContext<AppleMusicContextType | null>(null);\n\ndeclare global {\n  interface Window {\n    MusicKit: any;\n  }\n}\n\nexport function AppleMusicProvider({ children }: { children: ReactNode }) {\n  const { setQueue, setCurrentTrack, setIsPlaying } = useRadioStore();\n  const [user, setUser] = useState<AppleMusicUser | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [playlists, setPlaylists] = useState<any[]>([]);\n  const [mk, setMk] = useState<any>(null);\n  const [skipCount, setSkipCount] = useState(0);\n  const [lastSongId, setLastSongId] = useState<string | null>(null);\n  const [commentaryEnabled, setCommentaryEnabled] = useState(true);\n  const commentaryAudioRef = useRef<HTMLAudioElement | null>(null);\n  const isPlayingRef = useRef(false);\n  \n  // Skip feedback loop - store skipped song IDs\n  const skippedSongsRef = useRef<Set<string>>(new Set());\n  \n  // Load skipped songs from localStorage\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        const saved = localStorage.getItem('raydo_skipped_songs');\n        if (saved) {\n          const parsed = JSON.parse(saved);\n          skippedSongsRef.current = new Set(parsed);\n        }\n      } catch (e) {\n        console.log('Failed to load skip history');\n      }\n    }\n  }, []);\n  \n  // Save skipped songs to localStorage\n  const saveSkipHistory = useCallback(() => {\n    if (typeof window !== 'undefined') {\n      try {\n        localStorage.setItem('raydo_skipped_songs', JSON.stringify(Array.from(skippedSongsRef.current)));\n      } catch (e) {\n        console.log('Failed to save skip history');\n      }\n    }\n  }, []);\n\n  // Initialize MusicKit\n  useEffect(() => {\n    const token = process.env.NEXT_PUBLIC_APPLE_MUSIC_DEVELOPER_TOKEN;\n    \n    if (!token || token.startsWith('your_') || token.length < 100) {\n      console.log('No valid Apple Music token');\n      return;\n    }\n\n    if (!window.MusicKit) {\n      const script = document.createElement('script');\n      script.src = 'https://js-cdn.music.apple.com/musickit/v3/musickit.js';\n      script.async = true;\n      script.onload = async () => {\n        try {\n          const MusicKit = window.MusicKit;\n          await MusicKit.configure({\n            developerToken: token,\n            app: { name: 'RAY.DO', build: '1.0.0' },\n          });\n          const instance = MusicKit.getInstance();\n          setMk(instance);\n          \n          // Handle play/pause state changes\n          instance.addEventListener('playbackStateDidChange', (state: string) => {\n            console.log('MusicKit playback state:', state);\n            isPlayingRef.current = state === 'playing';\n            setIsPlaying(state === 'playing');\n            \n            // Auto-skip to next song if current ended\n            if (state === 'ended' || state === 'completed') {\n              handleAutoSkip();\n            }\n          });\n          \n          // Track skips from Player component\n          if (typeof window !== 'undefined') {\n            window.addEventListener('raydo:skip', () => {\n              setSkipCount(prev => {\n                const newCount = prev + 1;\n                console.log('Skip tracked, count:', newCount);\n                \n                // Track which song was skipped\n                if (instance.nowPlayingItem?.id) {\n                  skippedSongsRef.current.add(instance.nowPlayingItem.id);\n                  saveSkipHistory();\n                  console.log('Skipped song ID:', instance.nowPlayingItem.id);\n                }\n                \n                return newCount;\n              });\n            });\n          }\n          \n          // Listen for song changes\n          instance.addEventListener('nowPlayingItemDidChange', async (item: any) => {\n            if (item) {\n              console.log('Song changed:', item.title, 'by', item.artistName);\n              setCurrentTrack({\n                id: item.id,\n                title: item.title,\n                artistName: item.artistName,\n                artworkUrl: item.artworkURL,\n                duration: item.duration,\n              });\n              \n              // Maybe play commentary after song starts (50% chance)\n              if (commentaryEnabled && Math.random() > 0.5) {\n                await playCommentary();\n              }\n            }\n          });\n          \n          console.log('MusicKit initialized');\n        } catch (e) {\n          console.log('MusicKit configure failed:', e);\n        }\n      };\n      document.head.appendChild(script);\n    } else {\n      const MusicKit = window.MusicKit;\n      MusicKit.configure({\n        developerToken: token,\n        app: { name: 'RAY.DO', build: '1.0.0' },\n      }).then(() => {\n        const instance = MusicKit.getInstance();\n        setMk(instance);\n        console.log('MusicKit ready (cached)');\n      });\n    }\n    \n    return () => {\n      if (commentaryAudioRef.current) {\n        commentaryAudioRef.current.pause();\n      }\n    };\n  }, []);\n\n  // Auto-skip when song ends\n  const handleAutoSkip = useCallback(() => {\n    const music = mk || (window.MusicKit && window.MusicKit.getInstance());\n    if (music && typeof (music as any).skipToNext === 'function') {\n      console.log('Auto-skipping to next song...');\n      (music as any).skipToNext();\n    }\n  }, [mk]);\n\n  // Play AI commentary\n  const playCommentary = useCallback(async () => {\n    const elevenLabsKey = process.env.ELEVENLABS_API_KEY;\n    if (!elevenLabsKey || elevenLabsKey.startsWith('your_')) return;\n    \n    // Don't interrupt music playback - commentary only plays between songs\n    if (isPlayingRef.current && !commentaryAudioRef.current?.paused) return;\n\n    // Get voice from station or use default\n    const voiceId = currentStation?.voiceId || '21m00Tcm4TlvDq8ikWAM'; // Default to Alex\n    \n    const hour = new Date().getHours();\n    let timeGreeting = '';\n    if (hour >= 5 && hour < 12) timeGreeting = 'Good morning! ';\n    else if (hour >= 12 && hour < 17) timeGreeting = 'Good afternoon! ';\n    else if (hour >= 17 && hour < 21) timeGreeting = 'Good evening! ';\n    else timeGreeting = 'Late night vibes! ';\n    \n    const comments = [\n      timeGreeting + \"Here's another track for you.\",\n      timeGreeting + \"This one fits the vibe perfectly.\",\n      timeGreeting + \"Keep the good vibes going.\",\n      timeGreeting + \"Another favorite coming up.\",\n      \"You're listening to RAY.DO.\",\n      \"More great music coming up.\",\n      \"This track is a perfect match for your mood.\",\n    ];\n    \n    const text = comments[Math.floor(Math.random() * comments.length)];\n    \n    try {\n      console.log('Playing AI commentary:', text, 'with voice:', voiceId);\n      const ttsResponse = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'xi-api-key': elevenLabsKey,\n        },\n        body: JSON.stringify({\n          text,\n          model_id: 'eleven_monolingual_v1',\n          voice_settings: { stability: 0.5, similarity_boost: 0.75 }\n        })\n      });\n      \n      if (ttsResponse.ok) {\n        const audioBlob = await ttsResponse.blob();\n        const audioUrl = URL.createObjectURL(audioBlob);\n        \n        if (commentaryAudioRef.current) {\n          commentaryAudioRef.current.pause();\n        }\n        \n        commentaryAudioRef.current = new Audio(audioUrl);\n        await commentaryAudioRef.current.play();\n        console.log('AI commentary playing');\n      }\n    } catch (e) {\n      console.log('Commentary failed:', e);\n    }\n  }, [commentaryEnabled]);\n\n  // Play function\n  const play = useCallback(async () => {\n    const music = mk || (window.MusicKit && window.MusicKit.getInstance());\n    if (music) {\n      try {\n        await music.play();\n        isPlayingRef.current = true;\n        setIsPlaying(true);\n        console.log('MusicKit play');\n      } catch (e) {\n        console.log('Play failed:', e);\n      }\n    }\n  }, [mk]);\n\n  // Pause function\n  const pause = useCallback(() => {\n    const music = mk || (window.MusicKit && window.MusicKit.getInstance());\n    if (music) {\n      try {\n        music.pause();\n        isPlayingRef.current = false;\n        setIsPlaying(false);\n        console.log('MusicKit pause');\n      } catch (e) {\n        console.log('Pause failed:', e);\n      }\n    }\n  }, [mk]);\n\n  // Skip function\n  const skip = useCallback(() => {\n    // Dispatch skip event\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new CustomEvent('raydo:skip'));\n    }\n    \n    const music = mk || (window.MusicKit && window.MusicKit.getInstance());\n    if (music) {\n      if (typeof (music as any).skipToNext === 'function') {\n        (music as any).skipToNext();\n      } else if (music.player && typeof music.player.skipToNextItem === 'function') {\n        music.player.skipToNextItem();\n      }\n      console.log('MusicKit skip');\n    }\n  }, [mk]);\n\n  const connectAppleMusic = async () => {\n    if (!mk) {\n      setError('Initializing...');\n      return;\n    }\n    \n    setIsLoading(true);\n    try {\n      await mk.authorize();\n      setUser({ name: 'Apple Music User', email: '', id: '' });\n    } catch (e: any) {\n      setError('Auth failed: ' + e.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const disconnect = () => {\n    if (mk) mk.unauthorize();\n    setUser(null);\n    setPlaylists([]);\n    setSkipCount(0);\n  };\n\n  // Weighted shuffle - popular tracks more likely to play, skipped songs deprioritized\n  const weightedShuffle = <T extends { id: string; attributes?: { durationInMillis?: number; releaseDate?: string } }>(array: T[]): T[] => {\n    const arr = [...array];\n    \n    // Calculate weights based on track duration (shorter = slightly more weight for variety)\n    // and recency if release date available\n    const weights = arr.map((track) => {\n      let weight = 1;\n      \n      // Penalize skipped songs heavily\n      if (skippedSongsRef.current.has(track.id)) {\n        weight *= 0.1; // 90% reduction for skipped songs\n      }\n      \n      // Slight boost for shorter tracks (3-4 min sweet spot)\n      const duration = track.attributes?.durationInMillis || 180000;\n      const minutes = duration / 60000;\n      if (minutes >= 3 && minutes <= 4) weight *= 1.2;\n      else if (minutes < 3) weight *= 1.1;\n      else if (minutes > 5) weight *= 0.8;\n      \n      // Add randomness\n      weight *= (0.6 + Math.random() * 0.8);\n      \n      return { item: track, weight, originalIndex: arr.indexOf(track) };\n    });\n    \n    // Sort by weight (descending) then shuffle\n    weights.sort((a, b) => b.weight - a.weight);\n    \n    // Fisher-Yates shuffle with weight consideration\n    for (let i = weights.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [weights[i], weights[j]] = [weights[j], weights[i]];\n    }\n    \n    return weights.map(w => w.item);\n  };\n\n  // Simple shuffle for fallback\n  const simpleShuffle = <T,>(array: T[]): T[] => {\n    const arr = [...array];\n    for (let i = arr.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [arr[i], arr[j]] = [arr[j], arr[i]];\n    }\n    return arr;\n  };\n\n  const createRadioStation = async (mood: 'chill' | 'hype' | 'balanced') => {\n    const music = mk || (window.MusicKit && window.MusicKit.getInstance());\n    \n    if (!music) {\n      setError('Apple Music not ready');\n      return;\n    }\n    \n    // Ensure authorized\n    if (!music.isAuthorized) {\n      try {\n        await music.authorize();\n      } catch (e: any) {\n        setError('Auth failed: ' + e.message);\n        return;\n      }\n    }\n    \n    if (!music.musicUserToken) {\n      console.log('No musicUserToken');\n      return;\n    }\n    \n    setIsLoading(true);\n    setError(null);\n    setSkipCount(0);\n    \n    const genres: Record<string, string[]> = {\n      chill: ['chill', 'lo-fi', 'ambient', 'acoustic'],\n      hype: ['hip-hop', 'electronic', 'dance', 'trap'],\n      balanced: ['pop', 'rock', 'indie', 'alternative'],\n    };\n    \n    const genreList = genres[mood];\n    console.log('Fetching songs from genres:', genreList);\n    \n    const token = process.env.NEXT_PUBLIC_APPLE_MUSIC_DEVELOPER_TOKEN;\n    const elevenLabsKey = process.env.ELEVENLABS_API_KEY;\n    \n    try {\n      let allTracks: any[] = [];\n      \n      // Fetch from each genre\n      for (const genre of genreList) {\n        const response = await fetch(\n          `https://api.music.apple.com/v1/catalog/us/search?term=${encodeURIComponent(genre)}&types=songs&limit=20`,\n          {\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Music-User-Token': music.musicUserToken\n            }\n          }\n        );\n        \n        if (response.ok) {\n          const data = await response.json();\n          const tracks = data?.results?.songs?.data || [];\n          allTracks = [...allTracks, ...tracks];\n        }\n      }\n      \n      // Remove duplicates\n      const uniqueTracks = allTracks.filter((track, index, self) =>\n        index === self.findIndex((t) => t.id === track.id)\n      );\n      \n      // Shuffle\n      const shuffledTracks = weightedShuffle(uniqueTracks);\n      \n      console.log(`Found ${shuffledTracks.length} unique tracks`);\n      \n      if (shuffledTracks.length > 0) {\n        const songIds = shuffledTracks.map((t: any) => t.id);\n        \n        // Update UI\n        const uiTracks = shuffledTracks.map((t: any) => ({\n          id: t.id,\n          title: t.attributes.name,\n          artistName: t.attributes.artistName,\n          artworkUrl: t.attributes.artwork?.url?.replace('{w}', '200').replace('{h}', '200'),\n          duration: Math.floor(t.attributes.durationInMillis / 1000),\n          previewUrl: t.attributes.previewUrl,\n        }));\n        \n        setQueue(uiTracks);\n        setCurrentTrack(uiTracks[0]);\n        \n        // Play opening commentary\n        if (elevenLabsKey && !elevenLabsKey.startsWith('your_')) {\n          const vibeDescriptions: Record<string, string> = {\n            chill: \"Welcome to your chill zone. Smooth vibes, laid-back beats, and ambient sounds to help you unwind. Here's your personalized mix.\",\n            hype: \"Turn it up! High-energy tracks, bangers, and beats that'll keep you moving. Your hype mix is ready.\",\n            balanced: \"The perfect mix of pop hits, rock anthems, and indie gems. Something for everyone, never boring. Enjoy!\",\n          };\n          \n          try {\n            console.log('Playing intro commentary...');\n            const ttsResponse = await fetch('https://api.elevenlabs.io/v1/text-to-speech/21m00Tcm4TlvDq8ikWAM', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'xi-api-key': elevenLabsKey,\n              },\n              body: JSON.stringify({\n                text: vibeDescriptions[mood],\n                model_id: 'eleven_monolingual_v1',\n                voice_settings: { stability: 0.5, similarity_boost: 0.75 }\n              })\n            });\n            \n            if (ttsResponse.ok) {\n              const audioBlob = await ttsResponse.blob();\n              const audioUrl = URL.createObjectURL(audioBlob);\n              \n              // Play intro\n              commentaryAudioRef.current = new Audio(audioUrl);\n              await commentaryAudioRef.current.play();\n              \n              // When intro ends, start music\n              commentaryAudioRef.current.onended = async () => {\n                console.log('Intro ended, starting music...');\n                await music.setQueue({ songs: songIds });\n                await music.play();\n                isPlayingRef.current = true;\n                setIsPlaying(true);\n              };\n              \n              setIsLoading(false);\n              return;\n            }\n          } catch (ttsError) {\n            console.log('ElevenLabs TTS failed:', ttsError);\n          }\n        }\n        \n        // No commentary - just play\n        await music.setQueue({ songs: songIds });\n        await music.play();\n        isPlayingRef.current = true;\n        setIsPlaying(true);\n        console.log('Playing shuffled queue');\n        setIsLoading(false);\n        return;\n      }\n      \n      console.log('No tracks found');\n      \n    } catch (e: any) {\n      console.error('Apple Music error:', e);\n    }\n    \n    // Fallback\n    setIsLoading(false);\n  };\n\n  return (\n    <AppleMusicContext.Provider \n      value={{ \n        user, \n        isAuthenticated: !!user, \n        isLoading, \n        error, \n        playlists, \n        connectAppleMusic, \n        disconnect, \n        createRadioStation,\n        play,\n        pause,\n        skip,\n      }}\n    >\n      {children}\n    </AppleMusicContext.Provider>\n  );\n}\n\nexport function useAppleMusic() {\n  const ctx = useContext(AppleMusicContext);\n  if (!ctx) throw new Error('useAppleMusic requires provider');\n  return ctx;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1338, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/app/components/Player.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { Play, Pause, SkipForward, SkipBack, Volume2, VolumeX } from 'lucide-react';\nimport { useRadioStore, Track } from '@/lib/store/radio';\nimport { useAppleMusic } from '@/lib/apple-music/player';\n\nexport function Player() {\n  const {\n    isPlaying,\n    currentTrack,\n    queue,\n    volume,\n    setIsPlaying,\n    setVolume,\n    nextTrack,\n  } = useRadioStore();\n  \n  const { play, pause, skip } = useAppleMusic();\n\n  const [isMuted, setIsMuted] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [duration, setDuration] = useState(0);\n  const [audioError, setAudioError] = useState<string | null>(null);\n  const [useHtml5Audio, setUseHtml5Audio] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const progressInterval = useRef<NodeJS.Timeout | null>(null);\n\n  // Detect if we should use HTML5 audio (demo tracks)\n  useEffect(() => {\n    if (currentTrack?.previewUrl?.includes('pixabay.com')) {\n      setUseHtml5Audio(true);\n    } else {\n      setUseHtml5Audio(false);\n    }\n  }, [currentTrack]);\n\n  // HTML5 Audio for demo tracks\n  useEffect(() => {\n    if (!useHtml5Audio || !currentTrack?.previewUrl) return;\n\n    console.log('Setting up HTML5 audio for:', currentTrack.previewUrl);\n\n    if (!audioRef.current) {\n      audioRef.current = new Audio();\n      audioRef.current.crossOrigin = 'anonymous';\n      \n      audioRef.current.addEventListener('ended', () => {\n        console.log('HTML5 audio ended');\n        nextTrack();\n      });\n      \n      audioRef.current.addEventListener('canplay', () => {\n        console.log('HTML5 audio can play');\n      });\n      \n      audioRef.current.addEventListener('error', (e) => {\n        console.log('HTML5 audio error:', audioRef.current?.error);\n      });\n    }\n\n    audioRef.current.src = currentTrack.previewUrl;\n    audioRef.current.load();\n\n    if (isPlaying) {\n      audioRef.current.play().catch(e => {\n        console.log('HTML5 play error:', e);\n        setAudioError('Click play to enable audio');\n      });\n    }\n\n    return () => {\n      if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current.src = '';\n      }\n    };\n  }, [useHtml5Audio, currentTrack, isPlaying, nextTrack]);\n\n  // Play/Pause for HTML5 audio\n  useEffect(() => {\n    if (!useHtml5Audio || !audioRef.current) return;\n\n    if (isPlaying) {\n      audioRef.current.play().catch(e => {\n        console.log('HTML5 play error:', e);\n      });\n    } else {\n      audioRef.current.pause();\n    }\n  }, [isPlaying, useHtml5Audio]);\n\n  // Progress tracking for HTML5 audio\n  useEffect(() => {\n    if (!useHtml5Audio) return;\n\n    progressInterval.current = setInterval(() => {\n      if (audioRef.current) {\n        setProgress(audioRef.current.currentTime);\n        setDuration(audioRef.current.duration || 0);\n      }\n    }, 500);\n\n    return () => {\n      if (progressInterval.current) {\n        clearInterval(progressInterval.current);\n      }\n    };\n  }, [useHtml5Audio]);\n\n  // Volume for HTML5 audio\n  useEffect(() => {\n    if (audioRef.current) {\n      audioRef.current.volume = isMuted ? 0 : volume;\n    }\n  }, [volume, isMuted]);\n\n  const handleSeek = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const time = parseFloat(e.target.value);\n    if (useHtml5Audio && audioRef.current) {\n      audioRef.current.currentTime = time;\n      setProgress(time);\n    }\n  };\n\n  const handlePlayPause = useCallback(() => {\n    if (useHtml5Audio) {\n      if (isPlaying) {\n        audioRef.current?.pause();\n        setIsPlaying(false);\n      } else {\n        audioRef.current?.play().catch(e => {\n          console.log('Play error:', e);\n          setAudioError('Click failed. Try again.');\n        });\n        setIsPlaying(true);\n      }\n    } else {\n      // Use Apple Music controls\n      if (isPlaying) {\n        pause();\n        setIsPlaying(false);\n      } else {\n        play();\n        setIsPlaying(true);\n      }\n    }\n  }, [useHtml5Audio, isPlaying, setIsPlaying, play, pause]);\n\n  const handleNext = useCallback(() => {\n    // Dispatch skip event for tracking\n    if (typeof window !== 'undefined') {\n      window.dispatchEvent(new CustomEvent('raydo:skip'));\n    }\n    \n    if (useHtml5Audio) {\n      nextTrack();\n    } else {\n      skip();\n      nextTrack();\n    }\n  }, [useHtml5Audio, skip, nextTrack]);\n\n  const handlePrev = useCallback(() => {\n    // Apple Music doesn't have a reliable \"previous\" - just restart current\n    if (useHtml5Audio && audioRef.current) {\n      audioRef.current.currentTime = 0;\n      setProgress(0);\n    }\n  }, [useHtml5Audio]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const displayTrack = currentTrack || (queue.length > 0 ? queue[0] : null);\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-zinc-900 border-t border-zinc-800 p-4 z-50\">\n      {/* Audio type indicator */}\n      {useHtml5Audio && (\n        <div className=\"mb-2 text-xs text-yellow-400\">\n           Demo Tracks (Pixabay)\n        </div>\n      )}\n\n      {/* Error message */}\n      {audioError && (\n        <div className=\"mb-2 p-2 bg-red-500/20 text-red-400 text-xs rounded flex items-center justify-between\">\n          <span>{audioError}</span>\n          <button onClick={() => setAudioError(null)} className=\"text-red-300\"></button>\n        </div>\n      )}\n\n      {/* Track Info */}\n      <div className=\"flex items-center gap-4 mb-4\">\n        {displayTrack?.artworkUrl && (\n          <img\n            src={displayTrack.artworkUrl}\n            alt={displayTrack.title}\n            className=\"w-16 h-16 rounded-lg object-cover\"\n            onError={(e) => {\n              (e.target as HTMLImageElement).style.display = 'none';\n            }}\n          />\n        )}\n        <div className=\"flex-1\">\n          <h3 className=\"text-white font-medium\">{displayTrack?.title || 'No track playing'}</h3>\n          <p className=\"text-zinc-400 text-sm\">{displayTrack?.artistName || 'Click Start AI Radio'}</p>\n        </div>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"mb-4\">\n        <input\n          type=\"range\"\n          min={0}\n          max={duration || 100}\n          value={progress}\n          onChange={handleSeek}\n          className=\"w-full h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white\"\n        />\n        <div className=\"flex justify-between text-xs text-zinc-500 mt-1\">\n          <span>{formatTime(progress)}</span>\n          <span>{formatTime(duration)}</span>\n        </div>\n      </div>\n\n      {/* Controls */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <button \n            onClick={handlePrev}\n            className=\"p-2 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <SkipBack size={20} />\n          </button>\n          <button\n            onClick={handlePlayPause}\n            className=\"p-3 bg-white rounded-full text-black hover:bg-zinc-200 transition-colors flex items-center justify-center\"\n          >\n            {isPlaying ? <Pause size={24} fill=\"currentColor\" /> : <Play size={24} fill=\"currentColor\" />}\n          </button>\n          <button\n            onClick={handleNext}\n            className=\"p-2 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <SkipForward size={20} />\n          </button>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={() => setIsMuted(!isMuted)}\n            className=\"p-2 text-zinc-400 hover:text-white transition-colors\"\n          >\n            {isMuted ? <VolumeX size={20} /> : <Volume2 size={20} />}\n          </button>\n          <input\n            type=\"range\"\n            min={0}\n            max={1}\n            step={0.1}\n            value={isMuted ? 0 : volume}\n            onChange={(e) => setVolume(parseFloat(e.target.value))}\n            className=\"w-24 h-1 bg-zinc-700 rounded-lg appearance-none cursor-pointer accent-white\"\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1773, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/app/components/Visualizer.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\n\nexport function Visualizer({ isPlaying }: { isPlaying: boolean }) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationRef = useRef<number>();\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const bars = 64;\n    const barWidth = canvas.width / bars - 2;\n\n    const animate = () => {\n      if (!isPlaying) {\n        ctx.fillStyle = '#18181b';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        animationRef.current = requestAnimationFrame(animate);\n        return;\n      }\n\n      // Clear with fade effect\n      ctx.fillStyle = 'rgba(24, 24, 27, 0.2)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      for (let i = 0; i < bars; i++) {\n        // Simulated frequency data based on time\n        const time = Date.now() / 1000;\n        const height = Math.sin(time * 2 + i * 0.3) * 30 + \n                      Math.sin(time * 3 + i * 0.5) * 20 +\n                      Math.random() * 30 + 20;\n\n        const hue = (i * 5 + time * 20) % 360;\n        const x = i * (barWidth + 2);\n        const y = canvas.height - height;\n\n        ctx.fillStyle = `hsla(${hue}, 70%, 60%, 0.8)`;\n        ctx.fillRect(x, y, barWidth, height);\n\n        // Glow effect\n        ctx.shadowBlur = 10;\n        ctx.shadowColor = `hsla(${hue}, 70%, 60%, 0.5)`;\n      }\n\n      animationRef.current = requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [isPlaying]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={800}\n      height={200}\n      className=\"w-full h-48 rounded-xl\"\n      style={{ background: '#18181b' }}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,WAAW,EAAE,SAAS,EAA0B;IAC9D,MAAM,YAAY,IAAA,6OAAM,EAAoB;IAC5C,MAAM,eAAe,IAAA,6OAAM;IAE3B,IAAA,gPAAS,EAAC;QACR,MAAM,SAAS,UAAU,OAAO;QAChC,IAAI,CAAC,QAAQ;QAEb,MAAM,MAAM,OAAO,UAAU,CAAC;QAC9B,IAAI,CAAC,KAAK;QAEV,MAAM,OAAO;QACb,MAAM,WAAW,OAAO,KAAK,GAAG,OAAO;QAEvC,MAAM,UAAU;YACd,IAAI,CAAC,WAAW;gBACd,IAAI,SAAS,GAAG;gBAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;gBAC9C,aAAa,OAAO,GAAG,sBAAsB;gBAC7C;YACF;YAEA,yBAAyB;YACzB,IAAI,SAAS,GAAG;YAChB,IAAI,QAAQ,CAAC,GAAG,GAAG,OAAO,KAAK,EAAE,OAAO,MAAM;YAE9C,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,IAAK;gBAC7B,yCAAyC;gBACzC,MAAM,OAAO,KAAK,GAAG,KAAK;gBAC1B,MAAM,SAAS,KAAK,GAAG,CAAC,OAAO,IAAI,IAAI,OAAO,KAChC,KAAK,GAAG,CAAC,OAAO,IAAI,IAAI,OAAO,KAC/B,KAAK,MAAM,KAAK,KAAK;gBAEnC,MAAM,MAAM,CAAC,IAAI,IAAI,OAAO,EAAE,IAAI;gBAClC,MAAM,IAAI,IAAI,CAAC,WAAW,CAAC;gBAC3B,MAAM,IAAI,OAAO,MAAM,GAAG;gBAE1B,IAAI,SAAS,GAAG,CAAC,KAAK,EAAE,IAAI,gBAAgB,CAAC;gBAC7C,IAAI,QAAQ,CAAC,GAAG,GAAG,UAAU;gBAE7B,cAAc;gBACd,IAAI,UAAU,GAAG;gBACjB,IAAI,WAAW,GAAG,CAAC,KAAK,EAAE,IAAI,gBAAgB,CAAC;YACjD;YAEA,aAAa,OAAO,GAAG,sBAAsB;QAC/C;QAEA;QAEA,OAAO;YACL,IAAI,aAAa,OAAO,EAAE;gBACxB,qBAAqB,aAAa,OAAO;YAC3C;QACF;IACF,GAAG;QAAC;KAAU;IAEd,qBACE,4QAAC;QACC,KAAK;QACL,OAAO;QACP,QAAQ;QACR,WAAU;QACV,OAAO;YAAE,YAAY;QAAU;;;;;;AAGrC"}},
    {"offset": {"line": 1844, "column": 0}, "map": {"version":3,"sources":["file:///Users/angelestrada/clawd/ai-radio-dj/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { Settings } from './components/Settings';\nimport { Player } from './components/Player';\nimport { StationSelector } from './components/StationSelector';\nimport { Visualizer } from './components/Visualizer';\nimport { useRadioStore } from '@/lib/store/radio';\nimport { AppleMusicProvider, useAppleMusic } from '@/lib/apple-music/player';\n\nconst GENRES = [\n  'pop', 'rock', 'hip-hop', 'electronic', 'jazz', 'classical', 'r&b', \n  'country', 'indie', 'alternative', 'metal', 'punk', 'reggae', 'blues',\n  'lo-fi', 'chill', 'ambient', 'dance', 'latin', 'folk', 'acoustic',\n  // Latin genres\n  'salsa', 'reggae', 'bachata', 'merengue', 'cumbia', 'latin pop', \n  'latin rock', 'timba', 'bolero', 'vallenato', 'banda', 'ranchera',\n  'norteo', 'corridos', 'urbano latino', 'dembow', 'latin hip-hop'\n];\n\nconst POPULAR_ARTISTS = [\n  'Drake', 'Taylor Swift', 'The Weeknd', 'Bad Bunny', 'Ed Sheeran',\n  'Dua Lipa', 'Post Malone', 'Billie Eilish', 'Harry Styles', 'Beyonc',\n  'Kendrick Lamar', 'Ariana Grande', 'Bruno Mars', 'SZA', 'Travis Scott',\n  // Latin artists\n  'J Balvin', 'Daddy Yankee', 'Ozuna', 'Karol G', 'Rauw Alejandro',\n  'Romeo Santos', 'Aventura', 'Marc Anthony', 'Shakira', 'Enrique Iglesias',\n  'Wisin', 'Yandel', 'Farruko', 'Natti Natasha', 'Becky G', 'Maluma',\n  'Feid', 'Peso Pluma', 'Grupo Frontera', 'Fuerza Regida', 'Los Tigres del Norte',\n  'Calibre 50', 'Junior H', 'Natanael Cano', 'Yng Lvcas', 'Xavi'\n];\n\nfunction AppleMusicDashboard() {\n  const { user, isAuthenticated, playlists = [], connectAppleMusic, disconnect, createRadioStation, isLoading, error } = useAppleMusic();\n  const { isPlaying, currentTrack } = useRadioStore();\n  const [selectedMood, setSelectedMood] = useState<'chill' | 'hype' | 'balanced'>('balanced');\n  const [selectedGenres, setSelectedGenres] = useState<string[]>(['pop']);\n  const [artistQuery, setArtistQuery] = useState('');\n  const [customArtists, setCustomArtists] = useState<string[]>([]);\n  const [showCustomize, setShowCustomize] = useState(false);\n  const [timeSuggestion, setTimeSuggestion] = useState<'chill' | 'hype' | 'balanced' | null>(null);\n\n  // Time-based mood suggestion\n  useEffect(() => {\n    const hour = new Date().getHours();\n    \n    // Morning (5-11): chill/start fresh\n    if (hour >= 5 && hour < 11) {\n      setTimeSuggestion('chill');\n    }\n    // Afternoon (11-17): balanced/energetic\n    else if (hour >= 11 && hour < 17) {\n      setTimeSuggestion('balanced');\n    }\n    // Evening/Night (17-5): hype/wind down based on preference\n    else {\n      setTimeSuggestion('hype');\n    }\n  }, []);\n\n  if (!isAuthenticated) {\n    return (\n      <>\n        {/* Apple Music */}\n        <div className=\"mb-4 p-6 bg-gradient-to-r from-red-500/10 to-red-600/10 border border-red-500/20 rounded-xl\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold text-red-400 mb-1\"> Apple Music</h3>\n              <p className=\"text-zinc-400\">Sign in with Apple Music to stream real music</p>\n            </div>\n              <button\n                onClick={connectAppleMusic}\n                className=\"px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-400 hover:to-pink-400 text-white font-semibold rounded-lg transition-colors\"\n              >\n                Connect\n              </button>\n          </div>\n          {error && (\n            <div className=\"mt-4 p-3 bg-red-500/20 border border-red-500/30 rounded-lg\">\n              <p className=\"text-red-400 text-sm\">{error}</p>\n            </div>\n          )}\n        </div>\n\n        {/* Spotify - Coming Soon */}\n        <div className=\"mb-8 p-6 bg-gradient-to-r from-green-500/10 to-green-600/10 border border-green-500/20 rounded-xl opacity-75\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"text-lg font-semibold text-green-400 mb-1\"> Spotify</h3>\n              <p className=\"text-zinc-400\">Connect your Spotify library for AI radio</p>\n            </div>\n              <button\n                onClick={() => alert('Spotify integration coming soon!')}\n                className=\"px-6 py-3 bg-zinc-800 text-zinc-500 font-semibold rounded-lg cursor-not-allowed\"\n              >\n                Coming Soon\n              </button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  const handleGenreToggle = (genre: string) => {\n    setSelectedGenres(prev => \n      prev.includes(genre) \n        ? prev.filter(g => g !== genre)\n        : [...prev, genre].slice(0, 3)\n    );\n  };\n\n  const handleAddArtist = () => {\n    if (artistQuery.trim() && !customArtists.includes(artistQuery.trim())) {\n      setCustomArtists(prev => [...prev, artistQuery.trim()].slice(0, 5));\n      setArtistQuery('');\n    }\n  };\n\n  const handleRemoveArtist = (artist: string) => {\n    setCustomArtists(prev => prev.filter(a => a !== artist));\n  };\n\n  const handleCreateStation = () => {\n    // Combine mood, genres, and artists\n    const stationConfig = {\n      mood: selectedMood,\n      genres: selectedGenres,\n      artists: customArtists\n    };\n    console.log('Creating station with:', stationConfig);\n    createRadioStation(selectedMood);\n  };\n\n  return (\n    <>\n      {/* User Header */}\n      <div className=\"mb-8 p-4 bg-zinc-900/50 rounded-xl flex items-center gap-4\">\n        <div className=\"w-12 h-12 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold\">\n          {user?.name?.charAt(0) || 'A'}\n        </div>\n        <div className=\"flex-1\">\n          <p className=\"text-zinc-400 text-sm\">Signed in with Apple Music</p>\n          <p className=\"text-white font-medium\">{user?.name}</p>\n        </div>\n        <button\n          onClick={disconnect}\n          className=\"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-lg text-sm\"\n        >\n          Disconnect\n        </button>\n      </div>\n\n      {/* Station Customizer */}\n      <div className=\"mb-8 p-6 bg-zinc-900/50 rounded-xl\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-white\"> Customize Your Station</h3>\n          <button \n            onClick={() => setShowCustomize(!showCustomize)}\n            className=\"text-zinc-400 hover:text-white text-sm\"\n          >\n            {showCustomize ? 'Hide' : 'Customize'}\n          </button>\n        </div>\n\n        {showCustomize && (\n          <div className=\"space-y-6\">\n            {/* Mood Selection */}\n            <div>\n              <p className=\"text-zinc-400 text-sm mb-2\"> Mood</p>\n              <div className=\"flex gap-3 flex-wrap\">\n                {(['chill', 'balanced', 'hype'] as const).map((mood) => (\n                  <button\n                    key={mood}\n                    onClick={() => setSelectedMood(mood)}\n                    className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                      selectedMood === mood \n                        ? 'bg-purple-500 text-white' \n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700'\n                    }`}\n                  >\n                    {mood === 'chill' && ' Chill'}\n                    {mood === 'balanced' && ' Balanced'}\n                    {mood === 'hype' && ' Hype'}\n                  </button>\n                ))}\n              </div>\n              {timeSuggestion && timeSuggestion !== selectedMood && (\n                <button\n                  onClick={() => setSelectedMood(timeSuggestion)}\n                  className=\"mt-2 text-xs text-purple-400 hover:text-purple-300 transition-colors\"\n                >\n                   {timeSuggestion === 'chill' ? 'Morning vibes?' : timeSuggestion === 'hype' ? 'Night owl energy?' : 'Afternoon mix?'} Click to apply\n                </button>\n              )}\n            </div>\n\n            {/* Genre Selection */}\n            <div>\n              <p className=\"text-zinc-400 text-sm mb-2\"> Genres (select up to 3)</p>\n              <div className=\"flex gap-2 flex-wrap\">\n                {GENRES.slice(0, 15).map((genre) => (\n                  <button\n                    key={genre}\n                    onClick={() => handleGenreToggle(genre)}\n                    className={`px-3 py-1 rounded-full text-sm transition-colors ${\n                      selectedGenres.includes(genre)\n                        ? 'bg-red-500 text-white'\n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700'\n                    }`}\n                  >\n                    {genre}\n                  </button>\n                ))}\n              </div>\n              <p className=\"text-zinc-500 text-xs mt-2\">Selected: {selectedGenres.join(', ') || 'none'}</p>\n            </div>\n\n            {/* Custom Artists */}\n            <div>\n              <p className=\"text-zinc-400 text-sm mb-2\"> Add Artists</p>\n              <div className=\"flex gap-2 mb-2\">\n                <input\n                  type=\"text\"\n                  value={artistQuery}\n                  onChange={(e) => setArtistQuery(e.target.value)}\n                  onKeyDown={(e) => e.key === 'Enter' && handleAddArtist()}\n                  placeholder=\"Search for an artist...\"\n                  className=\"flex-1 bg-zinc-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500\"\n                />\n                <button\n                  onClick={handleAddArtist}\n                  className=\"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg\"\n                >\n                  Add\n                </button>\n              </div>\n              \n              {/* Popular Artists Quick Add */}\n              <div className=\"mb-3\">\n                <p className=\"text-zinc-500 text-xs mb-2\">Popular:</p>\n                <div className=\"flex gap-2 flex-wrap\">\n                  {POPULAR_ARTISTS.slice(0, 8).map((artist) => (\n                    <button\n                      key={artist}\n                      onClick={() => {\n                        if (!customArtists.includes(artist)) {\n                          setCustomArtists(prev => [...prev, artist].slice(0, 5));\n                        }\n                      }}\n                      className=\"px-2 py-1 bg-zinc-800 hover:bg-zinc-700 text-zinc-400 text-xs rounded\"\n                    >\n                      + {artist}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Selected Artists */}\n              {customArtists.length > 0 && (\n                <div className=\"flex gap-2 flex-wrap\">\n                  {customArtists.map((artist) => (\n                    <span key={artist} className=\"flex items-center gap-2 px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm\">\n                      {artist}\n                      <button onClick={() => handleRemoveArtist(artist)} className=\"hover:text-white\"></button>\n                    </span>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Quick Start */}\n      <div className=\"mb-8 p-6 bg-zinc-900/50 rounded-xl\">\n        <h3 className=\"text-lg font-semibold text-white mb-4\"> Quick Start AI Radio</h3>\n        <p className=\"text-zinc-400 text-sm mb-4\">\n          {customArtists.length > 0 \n            ? `AI Radio with ${selectedGenres.join(', ')} + ${customArtists.join(', ')}`\n            : `AI Radio mixing ${selectedGenres.join(', ')} songs`\n          }\n          {' '}- {selectedMood} mood with AI commentary\n        </p>\n        \n        <button\n          onClick={handleCreateStation}\n          disabled={isLoading || selectedGenres.length === 0}\n          className=\"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white font-semibold rounded-lg transition-colors disabled:opacity-50\"\n        >\n          {isLoading ? 'Creating Station...' : ' Start AI Radio'}\n        </button>\n      </div>\n\n      {/* User's Playlists */}\n      {playlists.length > 0 && (\n        <div className=\"mb-8\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\"> Your Playlists</h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {playlists.slice(0, 8).map((playlist) => (\n              <div\n                key={playlist.id}\n                className=\"p-4 bg-zinc-900/50 rounded-xl hover:bg-zinc-800 transition-colors cursor-pointer\"\n              >\n                {playlist.artwork && (\n                  <img \n                    src={playlist.artwork.url?.replace('{w}', '200').replace('{h}', '200')}\n                    alt={playlist.name}\n                    className=\"w-full aspect-square object-cover rounded-lg mb-3\"\n                  />\n                )}\n                <p className=\"text-white font-medium truncate\">{playlist.name}</p>\n                <p className=\"text-zinc-500 text-sm\">{playlist.trackCount} tracks</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Now Playing */}\n      {currentTrack && (\n        <div className=\"mb-6 p-4 bg-zinc-900/50 rounded-xl flex items-center gap-4\">\n          {currentTrack.artworkUrl && (\n            <img src={currentTrack.artworkUrl} alt={currentTrack.title} className=\"w-16 h-16 rounded-lg\" />\n          )}\n          <div className=\"flex-1\">\n            <p className=\"text-white font-medium\">{currentTrack.title}</p>\n            <p className=\"text-zinc-400 text-sm\">{currentTrack.artistName}</p>\n          </div>\n          <div className={`w-3 h-3 rounded-full ${isPlaying ? 'bg-green-400 animate-pulse' : 'bg-zinc-500'}`} />\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction HomeContent() {\n  const { toggleSettings, isPlaying } = useRadioStore();\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setIsLoading(false), 1000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-zinc-800 border-t-white rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-zinc-400\">Loading RAY.DO...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black text-white\">\n      {/* Header */}\n      <header className=\"sticky top-0 z-10 bg-black/80 backdrop-blur-lg border-b border-zinc-800\">\n        <div className=\"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-500 rounded-lg flex items-center justify-center\">\n              <span className=\"text-xl\"></span>\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold\">RAY.DO</h1>\n              <p className=\"text-xs text-zinc-500\">AI Radio DJ with Apple Music</p>\n            </div>\n          </div>\n\n          <button\n            onClick={toggleSettings}\n            className=\"p-2 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <circle cx=\"12\" cy=\"12\" r=\"3\" />\n            </svg>\n          </button>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-6xl mx-auto px-6 py-8 pb-32\">\n        <AppleMusicDashboard />\n        <Visualizer isPlaying={isPlaying} />\n      </main>\n\n      <Player />\n      <Settings />\n    </div>\n  );\n}\n\nexport default function Home() {\n  return (\n    <AppleMusicProvider>\n      <HomeContent />\n    </AppleMusicProvider>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}